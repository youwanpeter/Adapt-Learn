@tailwind base;
@tailwind components;
@tailwind utilities;

/* ------------------------------
   Design Tokens (HSL channels)
--------------------------------*/
@layer base {
  :root {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 6.5%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 5.5%;
    --popover-foreground: 210 40% 98%;

    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 262 83% 64%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;

    --radius: 0.9rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 6%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 5%;
    --popover-foreground: 210 40% 98%;

    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 220 22% 18%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 282 78% 66%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 223 26% 20%;
    --input: 223 26% 20%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* --------------------------------
   Modern Effects & Utilities
---------------------------------*/

/* Premium glass card */
.glassmorphic-card {
  @apply rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
  transition: transform 0.35s ease, box-shadow 0.35s ease,
    border-color 0.35s ease, background-color 0.35s ease;
}
.glassmorphic-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.14);
}

/* Soft interactive elevation for any element */
.elevate {
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.28);
}
.elevate:hover {
  transform: translateY(-3px);
  box-shadow: 0 18px 42px rgba(0, 0, 0, 0.4);
}

/* Subtle gradient border helper (mask-based, high-end look) */
.gradient-border {
  position: relative;
  border-radius: var(--radius);
}
.gradient-border::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    hsla(var(--primary) / 0.65) 0%,
    hsla(var(--accent) / 0.65) 40%,
    hsla(var(--ring) / 0.65) 100%
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* --------------------------------
   Aurora Background 2.0 (Animated)
---------------------------------*/
/* Container: apply to body or a section */
.aurora-bg {
  position: relative;
  isolation: isolate;
  background: radial-gradient(
    120% 120% at 50% 0%,
    hsl(var(--background)) 0%,
    hsl(var(--background)) 60%,
    hsl(var(--background)) 100%
  );
  overflow: clip;
}

/* Ribbon gradients (animated) */
.aurora-bg::before,
.aurora-bg::after {
  content: "";
  position: absolute;
  inset: -20% -10%;
  z-index: -1;
  filter: blur(40px) saturate(130%);
  opacity: 0.9;
  background: radial-gradient(
      60% 40% at 15% 30%,
      hsla(var(--primary) / 0.24),
      transparent 60%
    ),
    radial-gradient(
      45% 30% at 85% 40%,
      hsla(var(--accent) / 0.2),
      transparent 60%
    ),
    radial-gradient(
      40% 35% at 55% 80%,
      hsla(var(--ring) / 0.18),
      transparent 60%
    );
  animation: auroraShift 24s ease-in-out infinite;
}

/* A second layer for parallax feel */
.aurora-bg::after {
  opacity: 0.7;
  filter: blur(52px) saturate(140%);
  background: radial-gradient(
      50% 40% at 20% 75%,
      hsla(var(--accent) / 0.16),
      transparent 60%
    ),
    radial-gradient(
      50% 40% at 80% 20%,
      hsla(var(--primary) / 0.16),
      transparent 60%
    );
  animation: auroraDrift 36s ease-in-out infinite;
}

/* Optional: ultra-subtle grid overlay (toggle by adding .with-grid) */
.with-grid::marker {
  content: "";
} /* keep Tailwind jit calm */
.with-grid::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  background-image: linear-gradient(
      to right,
      rgba(255, 255, 255, 0.035) 1px,
      transparent 1px
    ),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.035) 1px, transparent 1px);
  background-size: 32px 32px;
  mask-image: radial-gradient(70% 50% at 50% 40%, #000 30%, transparent 100%);
  pointer-events: none;
}

/* Fine noise for texture (toggle by adding .with-noise) */
.with-noise::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  opacity: 0.08;
  pointer-events: none;
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'>\
<filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/></filter>\
<rect width='120' height='120' filter='url(%23n)' opacity='0.65'/></svg>");
  mix-blend-mode: overlay;
  animation: grain 1.8s steps(8) infinite;
}

/* --------------------------------
   Animations (motion-safe)
---------------------------------*/
@media (prefers-reduced-motion: no-preference) {
  @keyframes auroraShift {
    0% {
      transform: translate3d(-2%, -1%, 0) scale(1.02) rotate(0.2deg);
    }
    25% {
      transform: translate3d(2%, -3%, 0) scale(1.03) rotate(-0.2deg);
    }
    50% {
      transform: translate3d(3%, 2%, 0) scale(1.02) rotate(0.15deg);
    }
    75% {
      transform: translate3d(-3%, 1%, 0) scale(1.035) rotate(-0.15deg);
    }
    100% {
      transform: translate3d(-2%, -1%, 0) scale(1.02) rotate(0.2deg);
    }
  }
  @keyframes auroraDrift {
    0% {
      transform: translate3d(0%, 0%, 0) scale(1);
    }
    50% {
      transform: translate3d(-2%, 1%, 0) scale(1.03);
    }
    100% {
      transform: translate3d(0%, 0%, 0) scale(1);
    }
  }
  @keyframes grain {
    0%,
    100% {
      transform: translate3d(0, 0, 0);
    }
    10% {
      transform: translate3d(-1%, -1%, 0);
    }
    20% {
      transform: translate3d(1%, -1%, 0);
    }
    30% {
      transform: translate3d(-1%, 1%, 0);
    }
    40% {
      transform: translate3d(1%, 1%, 0);
    }
    50% {
      transform: translate3d(-0.5%, -0.5%, 0);
    }
    60% {
      transform: translate3d(0.5%, -0.5%, 0);
    }
    70% {
      transform: translate3d(-0.5%, 0.5%, 0);
    }
    80% {
      transform: translate3d(0.25%, 0.25%, 0);
    }
    90% {
      transform: translate3d(-0.25%, -0.25%, 0);
    }
  }
}

/* Respect users who prefer less motion */
@media (prefers-reduced-motion: reduce) {
  .aurora-bg::before,
  .aurora-bg::after,
  .with-noise::after {
    animation: none !important;
  }
}

/* --------------------------------
   Polished Buttons (token-aware)
---------------------------------*/
@layer components {
  .btn-primary {
    @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 font-medium;
    background: linear-gradient(
      180deg,
      hsla(var(--primary) / 0.95),
      hsla(var(--ring) / 0.92)
    );
    color: hsl(var(--primary-foreground));
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
    transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
  }
  .btn-primary:hover {
    transform: translateY(-1px);
    filter: saturate(110%);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45),
      inset 0 1px 0 rgba(255, 255, 255, 0.18);
  }
  .btn-primary:active {
    transform: translateY(0);
  }

  .chip {
    @apply inline-flex items-center rounded-full px-3 py-1 text-sm border;
    background: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    border-color: hsla(var(--foreground) / 0.08);
  }
}

/* --------------------------------
   Light-mode fallback surface
---------------------------------*/
:root:not(.dark) .aurora-bg {
  background: radial-gradient(
    120% 120% at 50% 0%,
    hsl(222 20% 12%) 0%,
    hsl(222 22% 10%) 60%,
    hsl(222 24% 9%) 100%
  );
}
